<html>
<head>
<TMPL_IF NAME="INLINE">
<script>
    <TMPL_INCLUDE NAME="public_html/static/music_async.js">
</script>
<style type="text/css">
    <TMPL_INCLUDE NAME="public_html/static/music.css">
</style>
<TMPL_ELSE>
<script src="static/music_async.js" async></script>
<link rel="stylesheet" href="static/music.css">
<link rel="preload" href="static/music.js" as="script">
</TMPL_IF>
<title>Music</title>
</head>
<body>
<div class="header row">
    <h1>Music</h1>
</div>
<div class="body row scroll-y">
    <div id="musicdb">
        
    </div>
</div>
<div class="footer row">  
    <table border="1" width="80%">
    <tr><th>Previous</th><th>Now Playing</th><th>Next</th></tr>
	<tr><td><div id="prev_text"></div></td><td><div id="play_text"></div></td><td><div id="next_text"></div></td></tr>  
	</table> 
    <input type="button" value="PREV" id="prevbtn" class="controlbtns">
    <button id="ppbtn" type="button" class="controlbtns">IDLE</button> 
    <input id="curtime" type="text" class="timedisplay" name="curseconds" value="0:00">
    <input type="range" step="any" id="seekbar" value="0">
    <input id="endtime" type="text" class="timedisplay" name="endseconds" value="0:00">
    <input type="button" value="NEXT" id="nextbtn" class="controlbtns">
    <input type="range" min="0" max="1" value="1.0" step="any" id="volslider">
	<label><input name="repeattrack" id="repeattrack" type="checkbox">Repeat Track</label>
  <!-- <iframe src="static/250ms_silence.mp3" allow="autoplay" id="audio" style="display:none"></iframe> -->
  <audio id="silence" src="static/250ms_silence.mp3"></audio>
</div>
<TMPL_IF NAME="INLINE">
    <script>
    <TMPL_INCLUDE NAME="public_html/static/music.js">
    </script>
<TMPL_ELSE>
    <script src="static/music.js" async></script>
</TMPL_IF>
<div id="actualmusicdb" style="display:none">
    <TMPL_VAR NAME="musicdb">
</div>
<script>
    // load the DB
    /*let urlParams = new URLSearchParams(window.location.search);
    urlParams.append('fmt', 'musicdbhtml');
    let myRequest = new Request('music?'+urlParams.toString());
    fetch(myRequest).then(function(response) {
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.text();        
    }).then((html) => {
        document.getElementById("musicdb").innerHTML = html;
    });
    */
    //document.getElementById("tempmusicdb").replaceWith(document.getElementById("musicdb"));
    //document.getElementById("musicdb").style.display = null; 
    document.getElementById("musicdb").innerHTML = document.getElementById("actualmusicdb").innerHTML;       
</script>
</body>
</html>